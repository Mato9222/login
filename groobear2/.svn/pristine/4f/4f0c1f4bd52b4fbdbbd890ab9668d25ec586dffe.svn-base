<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="co" %>
    <!DOCTYPE html>
	<!--begin::Main-->
	<div class="app-main flex-column flex-row-fluid" id="kt_app_main">
		<!--begin::Content wrapper-->
		<div class="d-flex flex-column flex-column-fluid">
			<!--begin::상단 받은메일 표시-->
<!-- 			<div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6"> -->
<!-- 				begin::Toolbar container -->
<!-- 				<div id="kt_app_toolbar_container" class="app-container container-xxl d-flex flex-stack"> -->
<!-- 					begin::Page title -->
<!-- 					<div class="page-title d-flex flex-column justify-content-center flex-wrap me-3"> -->
<!-- 						begin::Title -->
<!-- 						<h5 class="page-heading d-flex text-gray-900 fw-bold fs-3 flex-column justify-content-center my-0">받은편지함</h5> -->
<!-- 						end::Title -->
<!-- 						begin::Breadcrumb -->
<!-- 						<ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1"> -->
<!-- 							begin::Item -->
<!-- 							<li class="breadcrumb-item text-muted"> -->
<%-- 								<a href="${pageContext.request.contextPath}/" class="text-muted text-hover-primary">Home</a> --%>
<!-- 							</li> -->
<!-- 							end::Item -->
<!-- 							begin::Item -->
<!-- 							<li class="breadcrumb-item"> -->
<!-- 								<span class="bullet bg-gray-500 w-5px h-2px"></span> -->
<!-- 							</li> -->
<!-- 							end::Item -->
<!-- 							begin::Item -->
<!-- 							<li class="breadcrumb-item text-muted">받은메일함</li> -->
<!-- 							end::Item -->
<!-- 						</ul> -->
<!-- 						end::Breadcrumb -->
<!-- 					</div> -->
<!-- 					end::Page title -->
<!-- 					begin::Actions -->
<!-- 					end::Actions -->
<!-- 				</div> -->
<!-- 				end::Toolbar container -->
<!-- 			</div> -->
			<!--end::받은메일 표시-->
			<!--begin::메일 시작-->
			<div id="kt_app_content" class="app-content flex-column-fluid">
				<!--begin::Content container-->
				<div id="kt_app_content_container" class="app-container container-xxl">
					<!--begin::Inbox App - Messages -->
					<div class="d-flex flex-column flex-lg-row">
						<!--begin::Sidebar-->
<!-- 						메뉴 사이드바 -->
<!-- 						<div class="d-none d-lg-flex flex-column flex-lg-row-auto w-100 w-lg-275px" data-kt-drawer="true" data-kt-drawer-name="inbox-aside" data-kt-drawer-activate="{default: true, lg: false}" data-kt-drawer-overlay="true" data-kt-drawer-width="225px" data-kt-drawer-direction="start" data-kt-drawer-toggle="#kt_inbox_aside_toggle" style=""> -->
<!-- 							begin::Sticky aside -->
<!-- 							<div class="card card-flush mb-0" data-kt-sticky="true" data-kt-sticky-name="inbox-aside-sticky" data-kt-sticky-offset="{default: false, xl: '100px'}" data-kt-sticky-width="{lg: '275px'}" data-kt-sticky-left="auto" data-kt-sticky-top="100px" data-kt-sticky-animation="false" data-kt-sticky-zindex="95"> -->
<!-- 								begin::Aside content -->
<!-- 								<div class="card-body"> -->
<!-- 									begin::Button -->
<!-- 									<a href="apps/inbox/compose.html" class="btn btn-primary fw-bold w-100 mb-8">받은편지함</a> -->
<!-- 									end::Button -->
<!-- 									begin::Menu -->
<!-- 									<div class="menu menu-column menu-rounded menu-state-bg menu-state-title-primary menu-state-icon-primary menu-state-bullet-primary mb-10"> -->
<!-- 										begin::Menu item -->
<!-- 										<div class="menu-item mb-3"> -->
<!-- 											begin::Inbox -->
<!-- 											<span class="menu-link active"> -->
<!-- 												<span class="menu-icon"> -->
<!-- 													<i class="ki-duotone ki-sms fs-2 me-3"> -->
<!-- 														<span class="path1"></span> -->
<!-- 														<span class="path2"></span> -->
<!-- 													</i> -->
<!-- 												</span> -->
<!-- 												<span class="menu-title fw-bold">받은메일함</span> -->
<!-- 												<span class="badge badge-light-success">3</span> -->
<!-- 											</span> -->
<!-- 											end::Inbox -->
<!-- 										</div> -->
<!-- 										end::Menu item -->
<!-- 										begin::Menu item -->
<!-- 										<div class="menu-item mb-3"> -->
<!-- 											begin::Marked -->
<!-- 											<span class="menu-link"> -->
<!-- 												<span class="menu-icon"> -->
<!-- 													<i class="ki-duotone ki-abstract-23 fs-2 me-3"> -->
<!-- 														<span class="path1"></span> -->
<!-- 														<span class="path2"></span> -->
<!-- 													</i> -->
<!-- 												</span> -->
<!-- 												<span class="menu-title fw-bold">보낸메일함</span> -->
<!-- 											</span> -->
<!-- 											end::Marked -->
<!-- 										</div> -->
<!-- 										end::Menu item -->
<!-- 										begin::Menu item -->
<!-- 										<div class="menu-item mb-3"> -->
<!-- 											begin::Draft -->
<!-- 											<span class="menu-link"> -->
<!-- 												<span class="menu-icon"> -->
<!-- 													<i class="ki-duotone ki-file fs-2 me-3"> -->
<!-- 														<span class="path1"></span> -->
<!-- 														<span class="path2"></span> -->
<!-- 													</i> -->
<!-- 												</span> -->
<!-- 												<span class="menu-title fw-bold">임시보관함</span> -->
<!-- 												<span class="badge badge-light-success">5</span> -->
<!-- 											</span> -->
<!-- 											end::Draft -->
<!-- 										</div> -->
<!-- 										end::Menu item -->
<!-- 										begin::Menu item -->
<!-- 										<div class="menu-item"> -->
<!-- 											begin::Trash -->
<!-- 											<span class="menu-link"> -->
<!-- 												<span class="menu-icon"> -->
<!-- 													<i class="ki-duotone ki-trash fs-2 me-3"> -->
<!-- 														<span class="path1"></span> -->
<!-- 														<span class="path2"></span> -->
<!-- 														<span class="path3"></span> -->
<!-- 														<span class="path4"></span> -->
<!-- 														<span class="path5"></span> -->
<!-- 													</i> -->
<!-- 												</span> -->
<!-- 												<span class="menu-title fw-bold">휴지통</span> -->
<!-- 												<span class="badge badge-light-success">5</span> -->
<!-- 											</span> -->
<!-- 											end::Trash -->
<!-- 										</div> -->
<!-- 										end::Menu item -->
<!-- 									</div> -->
<!-- 									end::Menu -->
<!-- 								</div> -->
<!-- 								end::Aside content -->
<!-- 							</div> -->
<!-- 							end::Sticky aside -->
<!-- 						</div> -->
						<!--end::Sidebar-->
						<!--begin::Content-->
						<div class="flex-lg-row-fluid ms-lg-7 ms-xl-10">
							<!--begin::Card-->
							<div class="card">
								<div class="card-header align-items-center py-5 gap-5">
									<!--begin::Actions-->
									<div class="d-flex">
										<!--begin::Back-->
										<a href="/mail" class="btn btn-sm btn-icon btn-clear btn-active-light-primary me-3" data-bs-toggle="tooltip" data-bs-placement="top" title="Back">
											<i class="ki-duotone ki-arrow-left fs-1 m-0">
												<span class="path1"></span>
												<span class="path2"></span>
											</i>
										</a>
										<!--end::Back-->
										<!--begin::Archive-->
<%-- 										 data-mail-no="${mailList.emailNo }" --%>

										<a href="/mail/reSend/${mail.rec[0].receNo }" data-mail-no="${mail.rec[0].receNo }" class="btn btn-sm btn-icon btn-light btn-active-light-primary me-2 reSend" data-bs-toggle="tooltip" data-bs-placement="top" title="답장">
											<i class="ki-duotone ki-sms fs-2 m-0">
												<span class="path1"></span>
												<span class="path2"></span>
											</i>
										</a>
										<!--end::Archive-->
										<!--begin::Spam-->
										<a href="#" class="btn btn-sm btn-icon btn-light btn-active-light-primary me-2" data-bs-toggle="tooltip" data-bs-placement="top" title="스팸">
											<i class="ki-duotone ki-information fs-2 m-0">
												<span class="path1"></span>
												<span class="path2"></span>
												<span class="path3"></span>
											</i>
										</a>
										<!--end::Spam-->
<%-- 										<p> ${mail } </p> --%>
										<!--begin::Delete-->
										<a href="/mail/trash/" data-no="${mail.rec[0].receNo }" class="btn btn-sm btn-icon btn-light btn-active-light-primary me-2 mailDel" data-bs-toggle="tooltip" data-bs-placement="top" title="Delete">
											<i class="ki-duotone ki-trash fs-2 m-0">
												<span class="path1"></span>
												<span class="path2"></span>
												<span class="path3"></span>
												<span class="path4"></span>
												<span class="path5"></span>
											</i>
										</a>
										<!--end::Delete-->
										<!--begin::Mark as read-->
<!-- 										<a href="#" class="btn btn-sm btn-icon btn-light btn-active-light-primary me-2" data-bs-toggle="tooltip" data-bs-placement="top" title="Mark as read"> -->
<!-- 											<i class="ki-duotone ki-copy fs-2 m-0"></i> -->
<!-- 										</a> -->
										<!--end::Mark as read-->
										<!--begin::Move-->
										<a href="#" class="btn btn-sm btn-icon btn-light btn-active-light-primary" data-bs-toggle="tooltip" data-bs-placement="top" title="이동">
											<i class="ki-duotone ki-entrance-left fs-2 m-0">
												<span class="path1"></span>
												<span class="path2"></span>
											</i>
										</a>
										<!--begin::Star 즐겨찾기-->
										<a href="#" class="btn btn-sm btn-icon btn-clear btn-active-light-primary me-3" data-bs-toggle="tooltip" data-bs-placement="top" title="중요메일">
											<i class="ki-duotone ki-star fs-2 m-0"></i>
										</a>
										<!--end::Star 즐겨찾기 -->
									</div>
									<!--end::Actions-->
									<!--begin::Pagination-->
									<div class="d-flex align-items-center">
										<!--begin::Pages info-->
<!-- 										<span class="fw-semibold text-muted me-2">1 - 50 of 235</span> -->
										<!--end::Pages info-->
										<!--begin::Prev page-->
										<a href="#" class="btn btn-sm btn-icon btn-light btn-active-light-primary me-3" data-bs-toggle="tooltip" data-bs-placement="top" title="이전 메일">
											<i class="ki-duotone ki-left fs-2 m-0"></i>
										</a>
										<!--end::Prev page-->
										<!--begin::Next page-->
										<a href="#" class="btn btn-sm btn-icon btn-light btn-active-light-primary me-2" data-bs-toggle="tooltip" data-bs-placement="top" title="다음 메일">
											<i class="ki-duotone ki-right fs-2 m-0"></i>
										</a>
										<!--end::Next page-->
										<!--begin::Toggle-->
										<a href="#" class="btn btn-sm btn-icon btn-color-primary btn-light btn-active-light-primary d-lg-none" data-bs-toggle="tooltip" data-bs-dismiss="click" data-bs-placement="top" title="Toggle inbox menu" id="kt_inbox_aside_toggle">
											<i class="ki-duotone ki-burger-menu-2 fs-3 m-0">
												<span class="path1"></span>
												<span class="path2"></span>
												<span class="path3"></span>
												<span class="path4"></span>
												<span class="path5"></span>
												<span class="path6"></span>
												<span class="path7"></span>
												<span class="path8"></span>
												<span class="path9"></span>
												<span class="path10"></span>
											</i>
										</a>
										<!--end::Toggle-->
									</div>
									<!--end::Pagination-->
								</div>
								
								<div class="card-body">
								<c:choose>
									<c:when test="${not empty mailList }">
										<c:forEach items="${mailList }" var="mail">
										<!--begin::Title-->
										<div class="d-flex flex-wrap gap-2 justify-content-between mb-8">
											<div class="d-flex align-items-center flex-wrap gap-2">
												<!--begin::제목-->
												<h1 class="fw-bold me-3 my-1">${mail.emailSj }</h1>
												<!--end::제목-->
											</div>
										</div>
										<!--end::Title-->
										<!--begin::Message accordion-->
										<div data-kt-inbox-message="message_wrapper">
											<!--begin::Message header-->
											<div class="d-flex flex-wrap gap-2 flex-stack cursor-pointer" data-kt-inbox-message="header">
												<!--begin::Author-->
												<div class="d-flex align-items-center">
													<!--begin::Avatar-->
													<div class="symbol symbol-50 me-4">
														<span class="symbol-label" style="background-image:url('${pageContext.request.contextPath}/resources/image/${mail.emp[0].proflPhotoCours }');"></span>
													</div>
										
													<!--end::Avatar-->
													<div class="pe-5">
														<!--begin::Author details-->
														<div class="d-flex align-items-center flex-wrap gap-1">
															<h3><a href="#" class="fw-bold text-gray-900 text-hover-primary">보낸사람 : ${mail.emp[0].emplNm }(${mail.emp[0].cmmnCodeNm })</a></h3>
															<div class="ms-auto w-75px text-end">
															<i class="ki-duotone ki-abstract-8 fs-7 text-success mx-3"> </i>
															</div>
														</div>
														<!--end::Author details-->
													</div>
												</div>
												<!--end::Author-->
												<div class="d-flex align-items-center flex-wrap gap-2">
													<!--begin::Date-->
													<span class="fw-semibold text-muted text-end me-3">${mail.trnsmisDt }</span>
													<!--end::Date-->
												</div>
												<!--end::Actions-->
											</div>
											<P></P>
<!-- 											<div class="d-flex flex-wrap gap-2 flex-stack cursor-pointer" data-kt-inbox-message="header"> -->
<!-- 												begin::Author -->
<!-- 												<div class="d-flex align-items-center"> -->
<!-- 													begin::Avatar -->
<!-- 													<div class="symbol symbol-50 me-4"> -->
<%-- 														<span class="symbol-label" style="background-image:url('${pageContext.request.contextPath}/resources/image/${mail.emp[0].proflPhotoCours }');"></span> --%>
<!-- 													</div> -->
<!-- 													end::Avatar -->
<!-- 													<div class="pe-5"> -->
<!-- 														begin::Author details -->
<!-- 														<div class="d-flex align-items-center flex-wrap gap-1"> -->
<%-- 															<h5><a href="#" class="fw-bold text-gray-900 text-hover-primary">받는사람 : ${mail.emp[0].emplNm }(${mail.emp[0].cmmnCodeNm })</a></h5> --%>
<!-- 															<div class="ms-auto w-75px text-end"> -->
<!-- 															<i class="ki-duotone ki-abstract-8 fs-7 text-success mx-3"> </i> -->
<!-- 															</div> -->
<!-- 														</div> -->
<!-- 													</div> -->
<!-- 												</div> -->
<!-- 											</div> -->
<!-- 											<p></p> -->
											</div>
											<!--end::Message header-->
											<!--begin::Message content-->
											<div id="kt_inbox_form_editor" class="bg-transparent border-0 h-350px px-3" style="overflow : auto">
												<pre><co:out value='${mail.emailCn }' escapeXml="false"></co:out></pre>
											</div>
											<div class="collapse fade show" data-kt-inbox-message="message">
												<div class="py-5">
													<p class="mb-0">하드코딩 명함3</p>
												</div>
											</div>
											<!--end::Message content-->
											<!--end::Message accordion-->
											</c:forEach>
										</c:when>
									</c:choose>
									</div>
								</div>
							</div>
							<!--end::Card-->
						</div>
						<!--end::Content-->
					</div>
					<!--end::Inbox App - View & Reply -->
				</div>
				<!--end::Content container-->
			</div>
			<!--end::Content-->
		</div>
		<!--end::Content wrapper-->
		
<script>
document.addEventListener("DOMContentLoaded", () => {
	$(".mailDel").on("click", function(e) {
		e.preventDefault();
		let no = this.dataset.no;

		console.log(no)
		
		let url =  `/mail/trash/\${no}`;
		$.ajax({
			url : url
			, method : "post"
			, dataType : "text"
			, success : function(res) {
				console.log(res)
				if(res == "success") {
					location.href = "/mail";
				}
				
			}
		})
	})

// 	$(".reSend").on("click", function(e) {
// 		e.preventDefault();
// 		let mailNo = this.dataset.mailNo;
		
// 		console.log(mailNo);
		
// 		$.ajax({
// 			url : `/mail/reSend/\${mailNo}`
// 			, method : "post"
// 			, dataType : "text"
// 			, success : function(res) {
// 				console.log(res)
// 				if(res == "success") {
// // 					location.href = "/mail/reSendMail";
// 				}
				
// 			}
// 		})
// 	})
})
</script>